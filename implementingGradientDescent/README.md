This is code that I was stuck on for an entire week during the Udacity Deep Learning nanodegree.

You should understand this very well, as expanded on in the further reading:

https://medium.com/@karpathy/yes-you-should-understand-backprop-e2f06eab496b

And the video:

https://www.youtube.com/watch?v=59Hbtz7XgjM
